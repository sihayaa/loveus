<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Our Co-Op Adventure — Flipbook</title>

  <!-- Page styling (background + page look) -->
  <style>
    :root{
      --ink:#1d2556;
      --bg:#0a0f2b;               /* midnight blue */
      --paper:#f5ecd9;            /* warm parchment */
      --paper-edge:#d8cbb0;
      --shadow:rgba(0,0,0,.25);
    }

    html,body{
      height:100%;
      margin:0;
      font-family: "Georgia", "Times New Roman", serif;
      color:var(--ink);
      background: var(--bg);
      overscroll-behavior: none;
    }

    /* Center the book */
    .stage{
      min-height:100%;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:40px 16px;
    }

    /* StPageFlip container size */
    #book{
      width: 1100px;       /* ~2 × page width */
      max-width: calc(100vw - 40px);
      min-width: 700px;    /* keeps it readable on narrow screens */
      aspect-ratio: 1100 / 720;
      position: relative;
    }

    /* Page interior styling for HTML mode */
    .page{
      position: relative;
      width: 100%;
      height: 100%;
      background: var(--paper);
      box-shadow:
        inset 0 0 0 1px var(--paper-edge),
        inset 0 0 80px rgba(0,0,0,.09);
    }
    .page .inner{
      padding: 36px 40px;
      height: 100%;
      box-sizing: border-box;
    }

    .page h1,.page h2{
      margin: 0 0 16px 0;
      letter-spacing: .5px;
    }

    /* Cover image = full bleed */
    .cover{
      background: #000 center/cover no-repeat
                  url("https://raw.githubusercontent.com/sihayaa/loveus/refs/heads/main/lovestory_cover.png");
      box-shadow:
        inset 0 0 0 2px rgba(255,255,255,.08),
        inset 0 0 140px rgba(0,0,0,.45);
    }
    /* Add a subtle thickness to hard pages */
    [data-density="hard"]{
      box-shadow:
        inset 0 0 0 2px rgba(255,255,255,.08),
        inset 0 0 140px rgba(0,0,0,.45);
    }

    /* HUD controls (optional) */
    .hud{
      position: absolute;
      left:50%;
      bottom:-48px;
      transform: translateX(-50%);
      display:flex; gap:10px;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
    }
    .btn{
      appearance:none;
      border:0;
      padding:10px 14px;
      border-radius:10px;
      font-weight:600;
      cursor:pointer;
      background:#6df0d0;
      color:#0b1630;
      box-shadow:0 6px 20px rgba(0,0,0,.25);
    }
    .btn:active{ transform:translateY(1px); }

    .hint{
      position:absolute;
      right:18px;
      bottom:-46px;
      color:#c7d3ff;
      font-size:14px;
      opacity:.8;
      font-style:italic;
      user-select:none;
    }

    /* Small screens: allow portrait mode */
    @media (max-width: 920px){
      #book{ min-width: 0; width: 96vw; }
    }
  </style>
</head>
<body>
  <div class="stage">

    <!-- StPageFlip container -->
    <div id="book">

      <!-- PAGES (HTML mode) -->
      <!-- Cover (hard) -->
      <div class="page cover" data-density="hard" aria-label="Cover"></div>

      <!-- Page 1 -->
      <div class="page">
        <div class="inner">
          <h1>Our Story Begins</h1>
          <p>
            Once upon a Discord… we queued for Overwatch, and somehow queued into each other’s lives.
            What started as games and laughter turned into late-night talks and quiet promises.
          </p>
        </div>
      </div>

      <!-- Page 2 -->
      <div class="page">
        <div class="inner">
          <h2>How We Met</h2>
          <p>
            We first chatted on an Overwatch server. I didn’t reply right away; fate gave me a tiny pause
            before everything began. When I did reply, we never really stopped.
          </p>
        </div>
      </div>

      <!-- Page 3 -->
      <div class="page">
        <div class="inner">
          <h2>Little Things</h2>
          <p>Science rants, history tangents, games you crush without trying—those little sparks became a warm light.</p>
        </div>
      </div>

      <!-- Page 4 -->
      <div class="page">
        <div class="inner">
          <h2>October 13, 2024</h2>
          <p>“You are now officially my girlfriend.” Simple words that melted my heart. The start of us.</p>
        </div>
      </div>

      <!-- Page 5 -->
      <div class="page">
        <div class="inner">
          <h2>Everyday</h2>
          <p>Not a day without each other—calls, games, smiles, quiet support. A rhythm that felt like home.</p>
        </div>
      </div>

      <!-- Page 6 -->
      <div class="page">
        <div class="inner">
          <h2>Looking Ahead</h2>
          <p>I want your good days and your hard days. Your dreams, your quiet, your everything. I choose you.</p>
        </div>
      </div>

      <!-- Back cover (hard) -->
      <div class="page" data-density="hard">
        <div class="inner" style="display:flex;align-items:center;justify-content:center;">
          <div>
            <h2 style="text-align:center;margin-bottom:8px;">The End (for now)</h2>
            <p style="text-align:center;opacity:.8;">…turn the page again anytime.</p>
          </div>
        </div>
      </div>

      <!-- Controls -->
      <div class="hud">
        <button class="btn" id="prevBtn">◀︎ Previous</button>
        <button class="btn" id="nextBtn">Next ▶︎</button>
      </div>
      <div class="hint">Drag the corners to turn pages</div>
    </div>
  </div>

  <!-- === Library: StPageFlip (your local file, with CDN fallback) === -->
  <script src="./flipbook.js"></script>
  <script>
    // Fallback to a CDN if local file fails to define St.PageFlip
    if (!window.St || !St.PageFlip) {
      var s = document.createElement('script');
      s.src = 'https://cdn.jsdelivr.net/npm/page-flip@2.0.7/dist/js/pageflip.min.js';
      document.head.appendChild(s);
    }
  </script>

  <!-- === Init === -->
  <script>
    (function boot(){
      if (!window.St || !St.PageFlip) { return setTimeout(boot, 30); }

      const bookEl = document.getElementById('book');

      // Create the book
      const pageFlip = new St.PageFlip(bookEl, {
        width: 550,              // single page width
        height: 720,             // single page height
        size: "fixed",           // keep page aspect nice
        maxShadowOpacity: 0.35,
        showCover: true,         // make first & last "hard"
        usePortrait: true,       // portrait on narrow screens
        flippingTime: 900,
        startPage: 0,
        startZIndex: 3,
        autoSize: true
      });

      // Load from HTML nodes (all .page children)
      const pages = bookEl.querySelectorAll('.page');
      pageFlip.loadFromHTML(pages);

      // Buttons
      document.getElementById('prevBtn').addEventListener('click', () => pageFlip.turnToPrevPage());
      document.getElementById('nextBtn').addEventListener('click', () => pageFlip.turnToNextPage());

      // (Optional) keyboard navigation
      window.addEventListener('keydown', (e)=>{
        if (e.key === 'ArrowLeft')  pageFlip.turnToPrevPage();
        if (e.key === 'ArrowRight') pageFlip.turnToNextPage();
      });

      // Example events
      pageFlip.on('flip', ({data})=>{
        // data = current left page index
        // console.log('page ->', data);
      });
    })();
  </script>
</body>
</html>
